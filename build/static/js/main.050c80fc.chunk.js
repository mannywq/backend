(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(21),c=n.n(a),r=n(5),o=n(4),u=n(3),i=n(1),s=n(10),l=n.n(s),j=n(0),d=function(e){var t=e.setter1,n=e.setter2,a=e.keyword,c=e.data,r=e.resultList,o=e.setResultList,u=t,i=n;return Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{name:"search",defaultValue:"",onChange:function(e){e.persist();e.target.name;var t=e.target.value;i(t),u(!0),""===t?(o(c),u(!1)):(!function(){var e=c.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));o(e)}(),console.log("filtered value is ",r),console.log("Searching for: ",t))},onBlur:function(e){""===e.target.value&&u(!1)}}),Object(j.jsx)("br",{})]})},b=n(6),h=n.n(b),O="api/persons",f=function(){return h.a.get(O).then((function(e){return e.data}))},m=function(e){return h.a.post(O,e).then((function(e){return e.data}))},v=function(e,t){return h.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){return h.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var t=e.name,n=e.value,a=e.id,c=e.updater,o=Object(i.useState)(n),s=Object(u.a)(o,2),l=s[0],d=s[1];return Object(j.jsx)("input",{type:"text",name:t,value:l,id:a,onChange:function(e){d(e.target.value)},onKeyDown:function(e){if("Enter"===e.key||"Escape"===e.key){var t=Object(r.a)({},e.target.name,l);console.log(t),c(e.target.id,t),e.target.blur()}},onBlur:function(e){""===e.target.value.trim()?d(n):d(e.target.value),console.log(e.target.id)}})},x=function(e){var t=e.state,n=e.data,a=e.resultList,c=e.setter,r=e.remover,o=c,u=function(e,t){v(e,t),f().then((function(e){o(e)}))};return!0===t?(console.log(a),a.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)(g,{name:"name",value:e.name,id:e.id,updater:u}),Object(j.jsx)(g,{name:"phone",value:e.phone,id:e.id,updater:u}),Object(j.jsx)("button",{id:e.id,name:e.name,onClick:r,children:"Delete"})]},e.id)}))):n.length>0?n.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)(g,{name:"name",value:e.name,id:e.id,updater:u}),Object(j.jsx)(g,{name:"phone",value:e.phone,id:e.id,updater:u}),Object(j.jsx)("button",{id:e.id,name:e.name,onClick:r,children:"Delete"})]},e.id)})):Object(j.jsx)("p",{children:"No people to show"})},w=function(e){var t=e.onChange,n=e.onSubmit;return Object(j.jsxs)("form",{id:"addPerson",onSubmit:n,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Name:"})," ",Object(j.jsx)("input",{name:"user",defaultValue:"",onChange:t}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{children:"Phone:"})," ",Object(j.jsx)("input",{name:"phone",defaultValue:"",onChange:t})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},S=(n(47),function(e){var t=e.message;return null===t?null:Object(j.jsx)("div",{className:"error",children:t})}),k=function(){var e=Object(i.useState)({}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)({}),s=Object(u.a)(c,2),b=s[0],h=s[1],O=Object(i.useState)(""),g=Object(u.a)(O,2),k=g[0],y=g[1],C=Object(i.useState)(!1),L=Object(u.a)(C,2),E=L[0],D=L[1],N=Object(i.useState)(!0),P=Object(u.a)(N,2),B=P[0],R=P[1],V=Object(i.useState)(null),A=Object(u.a)(V,2),J=A[0],I=A[1],K=Object(i.useState)([]),T=Object(u.a)(K,2),U=T[0],$=T[1],q=Object(i.useState)([]),z=Object(u.a)(q,2),F=z[0],G=z[1];Object(i.useEffect)((function(){f().then((function(e){$(e),G(U),R(!1)}))}),[]);var H=function(e,t,n){switch(t){case"user":if(n.length<=4)h(Object(o.a)(Object(o.a)({},b),{},{username:"User name should have at least 5 letters"}));else{var a=l.a.omit(b,"username");h(a)}break;case"phone":if(new RegExp(/^0\d{2}\d{8}$/).test(n)){var c=l.a.omit(b,"phone");h(c)}else h(Object(o.a)(Object(o.a)({},b),{},{phone:"Phone number should be formatted as 070-12341234"}))}};return!0===B?Object(j.jsx)("p",{children:"Loading data..."}):!0!==B?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(S,{message:J}),Object(j.jsx)(d,{setter1:D,setter2:y,keyword:k,data:U,resultList:F,setResultList:G}),Object(j.jsx)("h2",{children:"Add new"}),Object(j.jsx)(w,{onChange:function(e){e.persist();var t=e.target.name,c=e.target.value;D(!1),H(e,t,c),a(Object(o.a)(Object(o.a)({},n),{},Object(r.a)({},t,c)))},onSubmit:function(e){e.preventDefault();var t={name:e.target[0].value,phone:e.target[1].value};if(""!==t.name){if(Object.values(b).length>0)return void alert(Object.values(b));var n=U.find((function(e){return e.name===t.name}));if(n)return v(n.id,{phone:t.phone}),void console.log(n);m(t).then((function(e){$(U.concat(e)),a({}),I("".concat(t.name," was added")),setTimeout((function(){I(null)}),5e3)}))}}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)("ul",{children:Object(j.jsx)(x,{state:E,data:U,resultList:F,setter:$,remover:function(e){var t=e.target.id,n=e.target.name;window.confirm("Are you sure you want to delete ".concat(n))&&(p(t),f().then((function(e){$(e),R(!1)})))}})})]}):void 0};c.a.render(Object(j.jsx)(k,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.050c80fc.chunk.js.map