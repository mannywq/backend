(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(21),c=n.n(a),r=n(5),o=n(4),u=n(3),s=n(1),i=n(10),l=n.n(i),j=n(0),d=function(e){var t=e.setter1,n=e.setter2,a=e.keyword,c=e.data,r=e.resultList,o=e.setResultList,u=t,s=n;return Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{name:"search",defaultValue:"",onChange:function(e){e.persist();e.target.name;var t=e.target.value;s(t),u(!0),""===t?(o(c),u(!1)):(!function(){var e=c.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));o(e)}(),console.log("filtered value is ",r),console.log("Searching for: ",t))},onBlur:function(e){""===e.target.value&&u(!1)}}),Object(j.jsx)("br",{})]})},b=n(6),h=n.n(b),O="api/persons",f=function(){return h.a.get(O).then((function(e){return e.data}))},m=function(e){return h.a.post(O,e).then((function(e){return e.data}))},v=function(e,t){return h.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){return h.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var t=e.name,n=e.value,a=e.id,c=e.updater,o=Object(s.useState)(n),i=Object(u.a)(o,2),l=i[0],d=i[1];return Object(j.jsx)("input",{type:"text",name:t,value:l,id:a,onChange:function(e){d(e.target.value)},onKeyDown:function(e){if("Enter"===e.key||"Escape"===e.key){var t=Object(r.a)({},e.target.name,l);console.log(t),c(e.target.id,t),e.target.blur()}},onBlur:function(e){""===e.target.value.trim()?d(n):d(e.target.value),console.log(e.target.id)}})},x=function(e){var t=e.state,n=e.data,a=e.resultList,c=e.setter,r=e.remover,o=c,u=function(e,t){v(e,t),f().then((function(e){o(e)}))};return!0===t?(console.log(a),a.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)(g,{name:"name",value:e.name,id:e._id,updater:u}),Object(j.jsx)(g,{name:"phone",value:e.phone,id:e._id,updater:u}),Object(j.jsx)("button",{id:e._id,name:e.name,onClick:r,children:"Delete"})]},e._id)}))):n.length>0?n.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)(g,{name:"name",value:e.name,id:e._id,updater:u}),Object(j.jsx)(g,{name:"phone",value:e.phone,id:e._id,updater:u}),Object(j.jsx)("button",{id:e.id,name:e.name,onClick:r,children:"Delete"})]},e._id)})):Object(j.jsx)("p",{children:"No people to show"})},w=function(e){var t=e.onChange,n=e.onSubmit;return Object(j.jsxs)("form",{id:"addPerson",onSubmit:n,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Name:"})," ",Object(j.jsx)("input",{name:"user",defaultValue:"",onChange:t}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{children:"Phone:"})," ",Object(j.jsx)("input",{name:"phone",defaultValue:"",onChange:t})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},S=(n(47),function(e){var t=e.message;return null===t?null:Object(j.jsx)("div",{className:"error",children:t})}),k=function(){var e=Object(s.useState)({}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)({}),i=Object(u.a)(c,2),b=i[0],h=i[1],O=Object(s.useState)(""),v=Object(u.a)(O,2),g=v[0],k=v[1],y=Object(s.useState)(!1),C=Object(u.a)(y,2),L=C[0],_=C[1],E=Object(s.useState)(!0),D=Object(u.a)(E,2),N=D[0],P=D[1],B=Object(s.useState)(null),R=Object(u.a)(B,2),V=R[0],A=R[1],J=Object(s.useState)([]),I=Object(u.a)(J,2),K=I[0],T=I[1],U=Object(s.useState)([]),$=Object(u.a)(U,2),q=$[0],z=$[1];Object(s.useEffect)((function(){f().then((function(e){T(e),z(K),P(!1)}))}),[]);var F=function(e,t,n){switch(t){case"user":if(n.length<=4)h(Object(o.a)(Object(o.a)({},b),{},{username:"User name should have at least 5 letters"}));else{var a=l.a.omit(b,"username");h(a)}break;case"phone":if(new RegExp(/^0\d{2}\d{8}$/).test(n)){var c=l.a.omit(b,"phone");h(c)}else h(Object(o.a)(Object(o.a)({},b),{},{phone:"Phone number should be formatted as 070-12341234"}))}};return!0===N?Object(j.jsx)("p",{children:"Loading data..."}):!0!==N?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(S,{message:V}),Object(j.jsx)(d,{setter1:_,setter2:k,keyword:g,data:K,resultList:q,setResultList:z}),Object(j.jsx)("h2",{children:"Add new"}),Object(j.jsx)(w,{onChange:function(e){e.persist();var t=e.target.name,c=e.target.value;_(!1),F(e,t,c),a(Object(o.a)(Object(o.a)({},n),{},Object(r.a)({},t,c)))},onSubmit:function(e){e.preventDefault();var t={name:e.target[0].value,phone:e.target[1].value};if(""!==t.name){if(Object.values(b).length>0)return void alert(Object.values(b));var n=K.find((function(e){return e.name===t.name}));if(n)return alert("".concat(n.name," already exists")),void console.log(n.name);m(t).then((function(e){T(K.concat(e)),a({}),A("".concat(t.name," was added")),setTimeout((function(){A(null)}),5e3)}))}}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)("ul",{children:Object(j.jsx)(x,{state:L,data:K,resultList:q,setter:T,remover:function(e){var t=e.target.id,n=e.target.name;window.confirm("Are you sure you want to delete ".concat(n))&&(p(t),f().then((function(e){T(e),P(!1)})))}})})]}):void 0};c.a.render(Object(j.jsx)(k,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.addb3876.chunk.js.map