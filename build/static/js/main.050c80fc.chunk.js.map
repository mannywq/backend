{"version":3,"sources":["components/Filter.js","services/personService.js","components/Editablefield.js","components/Content.js","components/AddPerson.js","components/Notification.js","App.js","index.js"],"names":["Filter","setter1","setter2","keyword","data","resultList","setResultList","setSearching","setSearchTerm","name","defaultValue","onChange","event","persist","target","value","res","filter","person","toLowerCase","includes","console","log","onBlur","db","axios","get","then","response","newObject","post","id","put","delete","EditableField","updater","useState","editingValue","setEditingValue","type","onKeyDown","key","obj","blur","trim","Content","state","setter","remover","setPersons","updateData","personService","result","map","f","phone","onClick","length","p","AddPerson","onSubmit","Notification","message","className","App","values","setValues","errors","setErrors","searchTerm","searching","isLoading","setLoading","notification","setNotification","persons","useEffect","personData","validate","username","newObj","_","omit","RegExp","test","preventDefault","newPerson","Object","alert","find","n","concat","setTimeout","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.050c80fc.chunk.js","sourcesContent":["const Filter = ({setter1, setter2, keyword, data, resultList, setResultList}) => {\n\n\n    const setSearching = setter1\n    const setSearchTerm = setter2\n\n    const filter = () => {\n\n        const res = data.filter(person => (\n        \n            person.name.toLowerCase().includes(keyword.toLowerCase())\n            \n        ))\n        debugger;\n\n        setResultList(res)\n\n    }\n\n    const handleSearch= (event) => {\n\n        event.persist()\n    \n        let name= event.target.name\n        let value = event.target.value\n    \n        setSearchTerm(value)\n        setSearching(true)\n\n        if(value === '') \n        {\n            setResultList(data)\n            setSearching(false)\n        }\n        else {\n\n            filter()\n\n            console.log('filtered value is ', resultList)\n            console.log('Searching for: ', value)\n        }\n        \n        }\n\n    const onBlur = (event) => {\n\n        if (event.target.value === '')\n\n        setSearching(false)\n    }\n\n\n    return (\n\n        <div>\n        <input name=\"search\" defaultValue='' onChange={handleSearch} onBlur={onBlur}/><br/>\n        </div>\n    )\n\n}\nexport default Filter","import axios from 'axios'\n\nconst db = 'api/persons'\n\nconst getAll = () => {\n\n    const request = axios.get(db).then(response => response.data)\n\n    return request\n}\n\nconst create = newObject => {\n\n    const request = axios.post(db, newObject)\n    return request.then(response => response.data)\n\n}\n\nconst update = (id, newObject) => {\n\n    const request = axios.put(`${db}/${id}`, newObject)\n    return request.then(response => response.data)\n    \n}\n\nconst remove = (id) => {\n\n    const request = axios.delete(`${db}/${id}`)\n    return request.then(response => response.data)\n\n}\n\nexport default { getAll, create, update, remove }","import { useState } from 'react'\n\n\nconst EditableField = ({name, value, id, updater}) => {\n\n    const [editingValue, setEditingValue] = useState(value)\n\n    const onChange = (event) => {\n\n        setEditingValue(event.target.value)\n    }\n\n    const onKeyDown = (event) => {\n\n        if (event.key === \"Enter\" || event.key === \"Escape\") {\n\n            const obj = {[event.target.name] : editingValue}\n\n            console.log(obj)\n\n            updater(event.target.id, obj)\n\n            event.target.blur()\n\n            \n              }\n\n        }\n\n    const onBlur = (event) => {\n\n        if (event.target.value.trim() === \"\") {\n\n            setEditingValue(value)\n        }\n        else {\n\n            setEditingValue(event.target.value)\n        }\n        console.log(event.target.id)\n    }\n\n    return (\n        <input type=\"text\"\n        name={name}\n        value={editingValue}\n        id={id}\n        onChange={onChange}\n        onKeyDown={onKeyDown}\n        onBlur={onBlur}\n        />\n    )\n\n\n}\n\nexport default EditableField","import personService from \"../services/personService\"\nimport EditableField from \"./Editablefield\"\n\nimport {useState, useEffect} from 'react'\n\nconst Content = ({state, data, resultList, setter, remover}) => {\n\n  const setPersons = setter\n  const searching = state\n\n  const updateData = (id, obj) => {\n\n    personService.update(id, obj)\n    personService.getAll().then(result => {\n\n      setPersons(result)\n\n    })\n\n  }\n\n  if(searching === true) {\n\n    console.log(resultList)\n\n    const content = resultList.map((f) => (\n    \n    <li key={f.id}>\n      <EditableField name=\"name\" value={f.name} id={f.id} updater={updateData}/>\n      <EditableField name=\"phone\" value={f.phone} id={f.id} updater={updateData}/>\n      <button id={f.id} name={f.name} onClick={remover}>Delete</button>\n      </li>))\n\n    return(content)\n\n    \n  }\n  else {\n\n  return (data.length > 0 ? data.map((p) => (\n  \n  <li key={p.id}>\n    <EditableField name=\"name\" value={p.name} id={p.id} updater={updateData}/>\n    <EditableField name=\"phone\" value={p.phone} id={p.id} updater={updateData}/> \n    <button id={p.id} name={p.name} onClick={remover}>Delete</button>\n    </li>)) : <p>No people to show</p>)\n\n\n  }\n\n     \n\n    \n  }\n  export default Content","const AddPerson = ({onChange, onSubmit}) => {\n\n    return (\n    <form id=\"addPerson\" onSubmit={onSubmit}>\n        <div>\n          <label>Name:</label> <input name=\"user\" defaultValue='' onChange={onChange} /><br/>\n          <label>Phone:</label> <input name=\"phone\" defaultValue='' onChange={onChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    )\n\n}\n\nexport default AddPerson","import './index.css'\n\nconst Notification = ({ message }) => {\n\n    if (message === null)\n    return null\n\n    return (\n\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","import { useEffect, useState } from \"react\"\nimport _ from 'lodash'\nimport Filter from './components/Filter'\nimport Content from \"./components/Content\"\nimport AddPerson from \"./components/AddPerson\"\nimport personService from \"./services/personService\"\nimport Notification from \"./components/Notification\"\n\n\n\nconst App = () => {\n\n\n  const [values, setValues] = useState({})\n  const [errors, setErrors] = useState({})\n  const [searchTerm, setSearchTerm] = useState('')\n  const [searching, setSearching] = useState(false)\n  const [isLoading, setLoading] = useState(true)\n  const [notification, setNotification] = useState(null)\n \n \n\n  const [persons, setPersons] = useState([])\n  const [resultList, setResultList] = useState([])\n    \n  \n  useEffect( () => {\n    \n    personService.getAll().then(personData => {\n\n      setPersons(personData)\n      setResultList(persons)\n      setLoading(false)\n    })    \n  },[])\n\n  const handleDelete = (event) => {\n\n    const id=event.target.id\n    const name=event.target.name\n\n    if (window.confirm(`Are you sure you want to delete ${name}`)) {\n\n    personService.remove(id)\n\n    personService.getAll().then(personData => {\n\n      setPersons(personData)\n      setLoading(false)\n    })    \n  }\n}\n\n\n  const handleSubmit = (event) => {\n\n    event.preventDefault();\n\n    const newPerson = { name: event.target[0].value, phone: event.target[1].value}\n    \n    if (newPerson.name !== '') {\n\n        if (Object.values(errors).length > 0) {\n\n            alert(Object.values(errors))\n            return;\n        }\n\n     const obj = persons.find(n => n.name === newPerson.name)\n\n      if (obj) {\n\n       personService.update(obj.id, {phone: newPerson.phone})\n        console.log(obj)\n        return;\n\n      }   \n      else {  \n      personService.create(newPerson)\n      .then(response => {\n        setPersons(persons.concat(response))\n        setValues({})\n        setNotification(`${newPerson.name} was added`)\n        setTimeout(() => { setNotification(null)}, 5000)\n      })  \n    }\n              \n      \n    }\n    \n  }\n\n\n\n\n\n  const handleChange = (event) => {\n\n    event.persist()\n\n    let name= event.target.name\n    let value = event.target.value\n\n    setSearching(false)\n\n    validate(event, name, value)\n\n    setValues({...values, [name]: value,})\n\n  }\n\nconst validate= (event, name, value) => {\n\n    switch (name) {\n\n      case 'user':\n        if (value.length <= 4) {\n\n          setErrors({...errors, username: 'User name should have at least 5 letters'})\n        }\n        else {\n\n          let newObj = _.omit(errors, \"username\")\n          setErrors(newObj)\n        }\n        break;\n      case 'phone':\n\n      if (\n        !new RegExp(/^0\\d{2}\\d{8}$/).test(value)\n      ) \n      {\n        setErrors({...errors, phone: 'Phone number should be formatted as 070-12341234'})\n\n      } else {\n\n        let newObj = _.omit(errors, \"phone\")\n        setErrors(newObj)\n      }\n\n      break;\n\n      default: break;\n    }\n  }\n  \n  \n\nif (isLoading === true) {\n\nreturn (\n<p>Loading data...</p>\n)\n}\n\nif (isLoading !== true)\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification}/>\n\n      <Filter setter1={setSearching} setter2={setSearchTerm} keyword={searchTerm} data={persons} resultList={resultList} setResultList={setResultList}/>\n\n      <h2>Add new</h2>\n      <AddPerson onChange={handleChange} onSubmit={handleSubmit}/>\n      \n      <h2>Numbers</h2>\n      <ul>\n       <Content state={searching} data={persons} resultList={resultList} setter={setPersons} remover={handleDelete}/>\n      \n      </ul>\n     \n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render( <App />, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}