(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(20),c=n.n(a),r=n(4),u=n(9),o=n(3),i=n(1),s=(n(27),n(0)),l=function(e){var t=e.setter1,n=e.setter2,a=e.keyword,c=e.data,r=e.resultList,u=e.setResultList,o=t,i=n;return Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{name:"search",defaultValue:"",onChange:function(e){e.persist();e.target.name;var t=e.target.value;i(t),o(!0),""===t?(u(c),o(!1)):(!function(){var e=c.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));u(e)}(),console.log("filtered value is ",r),console.log("Searching for: ",t))},onBlur:function(e){""===e.target.value&&o(!1)}}),Object(s.jsx)("br",{})]})},j=n(5),d=n.n(j),b="api/persons",O=function(){return d.a.get(b).then((function(e){return e.data}))},h=function(e){return d.a.post(b,e).then((function(e){return e.data})).catch((function(e){setNotification(e)}))},f=function(e,t){return d.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},m=function(e){return d.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var t=e.name,n=e.value,a=e.id,c=e.updater,u=Object(i.useState)(n),l=Object(o.a)(u,2),j=l[0],d=l[1];return Object(s.jsx)("input",{type:"text",name:t,value:j,id:a,onChange:function(e){d(e.target.value)},onKeyDown:function(e){if("Enter"===e.key||"Escape"===e.key){var t=Object(r.a)({},e.target.name,j);console.log(t),c(e.target.id,t),e.target.blur()}},onBlur:function(e){""===e.target.value.trim()?d(n):d(e.target.value),console.log(e.target.id)}})},p=function(e){var t=e.state,n=e.data,a=e.resultList,c=e.setter,r=e.remover,u=c,o=function(e,t){f(e,t),O().then((function(e){u(e)}))};return!0===t?(console.log(a),a.map((function(e){return Object(s.jsxs)("li",{children:[Object(s.jsx)(v,{name:"name",value:e.name,id:e.id,updater:o}),Object(s.jsx)(v,{name:"phone",value:e.phone,id:e.id,updater:o}),Object(s.jsx)("button",{id:e.id,name:e.name,onClick:r,children:"Delete"})]},e.id)}))):n.length>0?n.map((function(e){return Object(s.jsxs)("li",{children:[Object(s.jsx)(v,{name:"name",value:e.name,id:e.id,updater:o}),Object(s.jsx)(v,{name:"phone",value:e.phone,id:e.id,updater:o}),Object(s.jsx)("button",{id:e.id,name:e.name,onClick:r,children:"Delete"})]},e.id)})):Object(s.jsx)("p",{children:"No people to show"})},g=function(e){var t=e.onChange,n=e.onSubmit;return Object(s.jsxs)("form",{id:"addPerson",onSubmit:n,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"Name:"})," ",Object(s.jsx)("input",{name:"user",defaultValue:"",onChange:t}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{children:"Phone:"})," ",Object(s.jsx)("input",{name:"phone",defaultValue:"",onChange:t})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},x=(n(47),function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"error",children:t})}),w=function(){var e=Object(i.useState)({}),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)({}),j=Object(o.a)(c,2),d=j[0],b=(j[1],Object(i.useState)("")),f=Object(o.a)(b,2),v=f[0],w=f[1],S=Object(i.useState)(!1),k=Object(o.a)(S,2),y=k[0],C=k[1],L=Object(i.useState)(!0),N=Object(o.a)(L,2),D=N[0],E=N[1],B=Object(i.useState)(null),P=Object(o.a)(B,2),V=P[0],A=P[1],J=Object(i.useState)([]),R=Object(o.a)(J,2),T=R[0],I=R[1],K=Object(i.useState)([]),q=Object(o.a)(K,2),z=q[0],F=q[1];Object(i.useEffect)((function(){O().then((function(e){I(e),F(T),E(!1)}))}),[]);return!0===D?Object(s.jsx)("p",{children:"Loading data..."}):!0!==D?Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(x,{message:V}),Object(s.jsx)(l,{setter1:C,setter2:w,keyword:v,data:T,resultList:z,setResultList:F}),Object(s.jsx)("h2",{children:"Add new"}),Object(s.jsx)(g,{onChange:function(e){e.persist();var t=e.target.name,c=e.target.value;C(!1),a(Object(u.a)(Object(u.a)({},n),{},Object(r.a)({},t,c)))},onSubmit:function(e){e.preventDefault();var t={name:e.target[0].value,phone:e.target[1].value};if(""!==t.name){if(Object.values(d).length>0)return void alert(Object.values(d));h(t).then((function(e){I(T.concat(e)),a({}),A("".concat(t.name," was added")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){A(e.message),setTimeout((function(){return A(null)}),5e3)}))}}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:Object(s.jsx)(p,{state:y,data:T,resultList:z,setter:I,remover:function(e){var t=e.target.id,n=e.target.name;window.confirm("Are you sure you want to delete ".concat(n))&&(m(t),O().then((function(e){I(e),E(!1)})))}})})]}):void 0};c.a.render(Object(s.jsx)(w,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.745528fc.chunk.js.map